@if (entidad$ | async; as entidad) {
	<div class="container mx-auto p-6">
		<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
			<!-- Información General -->
			<div
				class="bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow duration-200">
				<div class="p-6">
					<div class="flex items-center mb-4">
						<div
							class="w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center mr-3">
							<i class="bi bi-building text-gray-600 text-lg"></i>
						</div>
						<h2 class="text-lg font-semibold text-gray-900">Información General</h2>
					</div>
					<div class="space-y-3">
						<div class="flex justify-between items-start">
							<span
								class="text-sm font-medium text-gray-500 min-w-0 flex-shrink-0 mr-3"
								>Nombre:</span
							>
							<span class="text-sm text-gray-900 text-right">{{
								entidad.nombre | titlecase
							}}</span>
						</div>
						<div class="flex justify-between items-start">
							<span
								class="text-sm font-medium text-gray-500 min-w-0 flex-shrink-0 mr-3"
								>Nombre Corto:</span
							>
							<span class="text-sm text-gray-900 text-right">{{
								entidad.nombre_corto | titlecase
							}}</span>
						</div>
						<div class="flex justify-between items-start">
							<span
								class="text-sm font-medium text-gray-500 min-w-0 flex-shrink-0 mr-3"
								>CUIT:</span
							>
							<span class="text-sm text-gray-900 text-right font-mono">{{
								entidad.cuit
							}}</span>
						</div>
						<div class="flex justify-between items-start">
							<span
								class="text-sm font-medium text-gray-500 min-w-0 flex-shrink-0 mr-3"
								>Tipo:</span
							>
							<span class="text-sm text-gray-900 text-right">{{
								entidad.tipo_entidad | titlecase
							}}</span>
						</div>
						<div class="flex justify-between items-start">
							<span
								class="text-sm font-medium text-gray-500 min-w-0 flex-shrink-0 mr-3"
								>Razón Social:</span
							>
							<span class="text-sm text-gray-900 text-right">{{
								entidad.razon_social | titlecase
							}}</span>
						</div>
					</div>
				</div>
			</div>

			<!-- Estado Operacional -->
			<div
				class="bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow duration-200">
				<div class="p-6">
					<div class="flex items-center mb-4">
						<div
							class="w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center mr-3">
							<i class="bi bi-gear text-gray-600 text-lg"></i>
						</div>
						<h2 class="text-lg font-semibold text-gray-900">Estado Operacional</h2>
					</div>
					<div class="space-y-3">
						<div class="flex justify-between items-center">
							<span class="text-sm font-medium text-gray-500">Estado:</span>
							<span
								class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
								{{ entidad.estado_operacional | titlecase }}
							</span>
						</div>
					</div>
				</div>
			</div>

			<!-- Estadísticas -->
			<div
				class="bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow duration-200">
				<div class="p-6">
					<div class="flex items-center mb-4">
						<div
							class="w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center mr-3">
							<i class="bi bi-bar-chart text-gray-600 text-lg"></i>
						</div>
						<h2 class="text-lg font-semibold text-gray-900">Estadísticas</h2>
					</div>
					<div class="grid grid-cols-2 gap-4">
						<div class="text-center">
							<div class="text-2xl font-bold text-gray-900">
								{{ entidad.total_lineas }}
							</div>
							<div class="text-xs text-gray-500 mt-1">Líneas</div>
						</div>
						<div class="text-center">
							<div class="text-2xl font-bold text-gray-900">
								{{ entidad.total_ramales }}
							</div>
							<div class="text-xs text-gray-500 mt-1">Ramales</div>
						</div>
						<div class="text-center">
							<div class="text-2xl font-bold text-gray-900">
								{{ entidad.total_vehiculos }}
							</div>
							<div class="text-xs text-gray-500 mt-1">Vehículos</div>
						</div>
						<div class="text-center">
							<div class="text-2xl font-bold text-gray-900">
								{{ entidad.vehiculos_con_linea }}
							</div>
							<div class="text-xs text-gray-500 mt-1">Con Línea</div>
						</div>
						<div class="text-center">
							<div class="text-2xl font-bold text-gray-900">
								{{ entidad.vehiculos_activos }}
							</div>
							<div class="text-xs text-gray-500 mt-1">Activos</div>
						</div>
						<div class="text-center">
							<div class="text-2xl font-bold text-gray-900">
								{{ entidad.total_personas }}
							</div>
							<div class="text-xs text-gray-500 mt-1">Personas</div>
						</div>
					</div>
				</div>
			</div>

			<!-- Contacto -->
			<div
				class="bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow duration-200 md:col-span-2 lg:col-span-3">
				<div class="p-6">
					<div class="flex items-center mb-6">
						<div
							class="w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center mr-3">
							<i class="bi bi-telephone text-gray-600 text-lg"></i>
						</div>
						<h2 class="text-lg font-semibold text-gray-900">
							Información de Contacto
						</h2>
					</div>
					<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
						<!-- Información Principal -->
						<div class="space-y-4">
							<h3
								class="text-sm font-medium text-gray-700 uppercase tracking-wide border-b border-gray-200 pb-2">
								Contacto Principal
							</h3>
							<div class="space-y-3">
								@if (entidad.telefono_principal) {
									<div class="flex items-center">
										<i class="bi bi-telephone-fill text-gray-400 mr-3 w-4"></i>
										<div>
											<div class="text-sm font-medium text-gray-900">
												{{ entidad.telefono_principal }}
											</div>
											<div class="text-xs text-gray-500">Teléfono principal</div>
										</div>
									</div>
								}
								@if (entidad.email_principal) {
									<div class="flex items-center">
										<i class="bi bi-envelope-fill text-gray-400 mr-3 w-4"></i>
										<div>
											<div class="text-sm font-medium text-gray-900 break-all">
												{{ entidad.email_principal }}
											</div>
											<div class="text-xs text-gray-500">Email principal</div>
										</div>
									</div>
								}
							</div>
						</div>

						<!-- Teléfonos -->
						@if (entidad.telefonos?.length > 0) {
							<div class="space-y-4">
								<h3
									class="text-sm font-medium text-gray-700 uppercase tracking-wide border-b border-gray-200 pb-2">
									Teléfonos Adicionales
								</h3>
								<div class="space-y-3">
									@for (telefono of entidad.telefonos; track $index) {
										@let telefonoInfo = getTelefonoInfo(telefono);
										<div class="bg-gray-50 rounded-lg p-3 border border-gray-100">
											<div class="flex items-start justify-between">
												<div class="flex-1">
													<div class="text-sm font-medium text-gray-900">
														{{ telefonoInfo.numero }}
													</div>
													@if (telefonoInfo.tipo) {
														<div class="text-xs text-gray-500 mt-1">
															{{ telefonoInfo.tipo }}
														</div>
													}
													@if (telefonoInfo.observaciones) {
														<div class="text-xs text-gray-400 mt-1">
															{{ telefonoInfo.observaciones }}
														</div>
													}
												</div>
												@if (telefonoInfo.primario) {
													<span
														class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
														Principal
													</span>
												}
											</div>
										</div>
									}
								</div>
							</div>
						}

						<!-- Correos -->
						@if (entidad.correos?.length > 0) {
							<div class="space-y-4">
								<h3
									class="text-sm font-medium text-gray-700 uppercase tracking-wide border-b border-gray-200 pb-2">
									Correos Electrónicos
								</h3>
								<div class="space-y-3">
									@for (correo of entidad.correos; track $index) {
										@let correoInfo = getCorreoInfo(correo);
										<div class="bg-gray-50 rounded-lg p-3 border border-gray-100">
											<div class="flex items-start justify-between">
												<div class="flex-1 min-w-0">
													<div class="text-sm font-medium text-gray-900 break-all">
														{{ correoInfo.email }}
													</div>
													@if (correoInfo.tipo) {
														<div class="text-xs text-gray-500 mt-1">
															{{ correoInfo.tipo }}
														</div>
													}
													@if (correoInfo.observaciones) {
														<div class="text-xs text-gray-400 mt-1">
															{{ correoInfo.observaciones }}
														</div>
													}
												</div>
												@if (correoInfo.primario) {
													<span
														class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800 ml-2 flex-shrink-0">
														Principal
													</span>
												}
											</div>
										</div>
									}
								</div>
							</div>
						}
					</div>
				</div>
			</div>
		</div>
	</div>
}
