<div
	class="bg-white rounded-lg shadow-sm border border-gray-200 hover:shadow-md transition-shadow duration-200 md:col-span-2">
	<div class="p-6">
		<div class="flex items-center justify-between mb-6">
			<div class="flex items-center">
				<div
					class="w-10 h-10 bg-gray-100 rounded-lg flex items-center justify-center mr-3">
					<i class="bi bi-truck text-gray-600 text-lg"></i>
				</div>
				<h2 class="text-lg font-semibold text-gray-900">
					Vehículos ({{ getVehiculosFiltrados().length }})
				</h2>
			</div>
		</div>

		<!-- Filtros -->
		<div
			class="flex flex-col sm:flex-row gap-4 mb-6 p-4 bg-gray-50 rounded-lg border border-gray-200">
			<!-- Buscador -->
			<div class="flex-1 flex flex-col gap-2">
				<label class="label" for="search-input" class="p-1">
					<span class="label-text font-medium text-gray-700">Buscar vehículos</span>
				</label>
				<div class="form-control">
					<div class="input-group">
						<input
							id="search-input"
							type="text"
							placeholder="Buscar por dominio, interno, tipo..."
							class="input w-full bg-white text-gray-800"
							[(ngModel)]="searchTerm"
							(input)="onSearchChange($event)" />
					</div>
				</div>
			</div>

			<!-- Filtro por línea -->
			<div class="w-full sm:w-56 flex flex-col gap-2">
				<label class="label" for="linea-select" class="p-1">
					<span class="label-text font-medium text-gray-700">Filtrar por línea</span>
				</label>
				<select
					id="linea-select"
					class="select w-full bg-white text-gray-800"
					[(ngModel)]="selectedLineaFilter"
					(change)="onLineaFilterChange($event)">
					<option value="">Todas las líneas</option>
					@for (linea of getLineasUnicas(); track linea) {
						<option [value]="linea">Línea {{ linea }}</option>
					}
				</select>
			</div>
		</div>

		@if (vehiculos.length > 0) {
			<!-- Tabla -->
			<div class="overflow-x-auto shadow-sm rounded-lg border border-gray-200">
				<table class="table w-full bg-white">
					<thead class="bg-gray-50">
						<tr>
							@for (columna of getColumnas(); track columna.key) {
								<th class="text-center font-semibold text-gray-700 py-4">
									{{ columna.label }}
								</th>
							}
						</tr>
					</thead>
					<tbody>
						@for (vehiculo of getVehiculosFiltrados(); track vehiculo.dominio) {
							<tr class="hover:bg-gray-100 transition-colors duration-150">
								@for (columna of getColumnas(); track columna.key) {
									<td
										class="text-center py-4 font-medium text-gray-800"
										[class]="columna.class || ''">
										@if (columna.pipe === 'titlecase') {
											{{ getVehiculoValue(vehiculo, columna.key) | titlecase }}
										} @else {
											{{ getVehiculoValue(vehiculo, columna.key) }}
										}
									</td>
								}
							</tr>
						} @empty {
							<tr>
								<td [attr.colspan]="getColumnas().length" class="text-center py-12">
									<div class="flex flex-col items-center">
										<i class="bi bi-search text-gray-400 text-5xl mb-3"></i>
										<p class="text-gray-600 font-medium">
											No se encontraron vehículos
										</p>
										<p class="text-gray-500 text-sm mt-1">
											Intenta ajustar los filtros de búsqueda
										</p>
									</div>
								</td>
							</tr>
						}
					</tbody>
				</table>
			</div>
		} @else {
			<div class="text-center py-8">
				<i class="bi bi-truck text-gray-300 text-4xl mb-4"></i>
				<p class="text-gray-500">No hay vehículos disponibles</p>
			</div>
		}
	</div>
</div>
