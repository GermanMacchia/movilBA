<dialog #dialog class="modal modal-middle min-width-[20rem]">
	<div class="modal-box">
		<div class="flex w-full items-center justify-between">
			<h3 class="text-lg font-bold my-6">{{ service.modalInfo().title }}</h3>
			@if(service.modalInfo().icon){
			<i style="font-size: 2.5rem" [class]="service.modalInfo().icon"></i>
			}
		</div>
		@if(service.modalInfo().info){
		<p class="py-2 whitespace-pre-line">{{ service.modalInfo().info }}</p>
		}
		<!--Formulario-->
		@if(service.formgroup){
		<div class="flex flex-col gap-3 py-4">
			@for (item of service.modalInfo().data; track $index) {
			<form [formGroup]="service.formgroup">
				@switch (item.type) {
				<!--String-->
				@case (types.STRING) {
				<label class="input">
					<span class="font-bold">{{item.key | titlecase}}</span>
					<input type="text" [formControlName]="item.key" />
				</label>
				}
				<!--Password-->
				@case (types.PASSWORD) {
				<label class="input mb-[1.5rem]">
					<span class="font-bold">{{item.key | titlecase}}</span>
					<input
						autocomplete="off"
						[formControlName]="item.key"
						type="password"
						class="input validator"
						minlength="8"
						pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" />
					<p class="validator-hint absolute left-0 top-[2.25rem]">
						Debe al menos 8 carácteres,<br />
						Incluyendo 1 mayúscula, 1 minúscula y 1 número
					</p>
				</label>
				}
				<!--Date-->
				@case (types.DATE) { }
				<!--Email-->
				@case (types.EMAIL) {
				<label class="input">
					<span class="font-bold">{{item.key | titlecase}}</span>
					<input
						[formControlName]="item.key"
						type="email"
						class="input validator"
						pattern="[a-zA-Z0-9._%+\-]+@[a-zA-Z0-9.\-]+\.[a-zA-Z]{2,}$" />
					<p class="validator-hint absolute mb-1 right-2 bottom-0">
						Debe tener formato de email
					</p>
				</label>
				}
				<!--Boolean-->
				@case (types.BOOLEAN) {
				<label>
					<span class="font-bold">{{item.key | titlecase}}</span>
					<input
						[formControlName]="item.key"
						type="checkbox"
						checked="checked"
						class="checkbox border-white bg-red-400 checked:border-white checked:bg-green-400 checked:text-white" />
				</label>
				} }
			</form>
			}
		</div>
		}
		<div class="modal-action flex gap-3">
			<button class="btn btn-soft btn-success" (click)="service.handleAccept()">
				<i class="bi bi-check2-circle"></i>
				Aceptar
			</button>
			@if(service.modalInfo()){
			<button class="btn btn-soft btn-error" (click)="service.handleCancel()">
				<i class="bi bi-x-circle"></i>
				Cancelar
			</button>
			}
		</div>
	</div>
</dialog>
